<!--
    Create DOCTYPE HTML structure.
    Import CSS from static/style.css.
    Create a header titled EDIT ANIMAL.
    Add line breaks between descriptions.
    Copyright: PawPair Team 2023.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EDIT ANIMAL</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <!--
        Create a navigation bar routing: HOME (/), ANIMALS (/animals) and LOGOUT (/logout).
        Separate links with pipes.
    -->
    <nav>
        <a href="/">HOME</a> |
        <a href="/animals">ANIMALS</a> |
        <a href="/logout">LOGOUT</a>
    </nav>
    <h1>EDIT ANIMAL</h1>
    <br>
    <!--
        Create centered table with 80% width.
        Table has 2 columns and 1 row for each "data" from app.py.
        Jinja template.
        Iterate over "data" to populate table.
        Column 1: "image" sourced from "image", max height 300px.
        Column 2: "id", "animal", "breed", "disposition", "create_date", and "availability".
        Bold and underline each key. Line break after each key.
        Disposition: Iterate over "disposition". Line break between key and values.
    -->
    <table align="center" width="80%">
        {% for animal in data %}
        <tr>
            <td>
                <img src="{{ animal['image'] }}" alt="image" height="300px">
            </td>
            <td>
                <b><u>ID</u></b><br>
                {{ animal['animal_id'] }}<br><br>
                <!--
                    Create form asking for "animal", "breed", "disposition", "create_date", and "availability". Route to /update.
                    Image: Text input with placeholder "image url". Default to "image" from "data".
                    Animal: Radio buttons for "Cat", "Dog", and "Other". Default to "animal" from "data".
                    Breed: Dropdown menu with "British Shorthair", "Persian", "Siamese", "French Bulldog", "German Shepherd",  "Golden Retriever", "Labrador Retriever", "Other". Default to "breed" from "data".
                    Disposition: Select one or more of "Good with Other Animals", "Good with Children", "Animal Must Be Leashed at All Times" with checkbox. Line break between options. Default to "disposition" from "data".
                    Date: Date input with today's date as default. Default to "create_date" from "data".
                    Availability: Dropdown with "Available", "Not Available", "Pending", and "Adopted". Default to "availability" from "data".
                -->
                <form action="/update" method="post">
                    <b><u>IMAGE</u></b><br>
                    <input type="text" name="image" placeholder="image url" value="{{ animal['image'] }}"><br><br>
                    <b><u>TYPE</u></b><br>
                    <input type="radio" name="animal" value="Cat" {% if animal['animal'] == 'Cat' %}checked{% endif %}>Cat<br>
                    <input type="radio" name="animal" value="Dog" {% if animal['animal'] == 'Dog' %}checked{% endif %}>Dog<br>
                    <input type="radio" name="animal" value="Other" {% if animal['animal'] == 'Other' %}checked{% endif %}>Other<br><br>
                    <b><u>BREED</u></b><br>
                    <select name="breed">
                        <option value="British Shorthair" {% if animal['breed'] == 'British Shorthair' %}selected{% endif %}>British Shorthair</option>
                        <option value="Persian" {% if animal['breed'] == 'Persian' %}selected{% endif %}>Persian</option>
                        <option value="Siamese" {% if animal['breed'] == 'Siamese' %}selected{% endif %}>Siamese</option>
                        <option value="French Bulldog" {% if animal['breed'] == 'French Bulldog' %}selected{% endif %}>French Bulldog</option>
                        <option value="German Shepherd" {% if animal['breed'] == 'German Shepherd' %}selected{% endif %}>German Shepherd</option>
                        <option value="Golden Retriever" {% if animal['breed'] == 'Golden Retriever' %}selected{% endif %}>Golden Retriever</option>
                        <option value="Labrador Retriever" {% if animal['breed'] == 'Labrador Retriever' %}selected{% endif %}>Labrador Retriever</option>
                        <option value="Other" {% if animal['breed'] == 'Other' %}selected{% endif %}>Other</option>
                    </select><br><br>
                    <b><u>DISPOSITION</u></b><br>
                    <input type="checkbox" name="disposition[]" value="Good with Other Animals" {% if 'Good with Other Animals' in animal['disposition'] %}checked{% endif %}>Good with Other Animals<br>
                    <input type="checkbox" name="disposition[]" value="Good with Children" {% if 'Good with Children' in animal['disposition'] %}checked{% endif %}>Good with Children<br>
                    <input type="checkbox" name="disposition[]" value="Animal Must Be Leashed at All Times" {% if 'Animal Must Be Leashed at All Times' in animal['disposition'] %}checked{% endif %}>Animal Must Be Leashed at All Times<br><br>
                    <b><u>DATE</u></b><br>
                    <input type="date" name="create_date" value="{{ animal['create_date'] }}"><br><br>
                    <b><u>AVAILABILITY</u></b><br>
                    <select name="availability">
                        <option value="Available" {% if animal['availability'] == 'Available' %}selected{% endif %}>Available</option>
                        <option value="Not Available" {% if animal['availability'] == 'Not Available' %}selected{% endif %}>Not Available</option>
                        <option value="Pending" {% if animal['availability'] == 'Pending' %}selected{% endif %}>Pending</option>
                        <option value="Adopted" {% if animal['availability'] == 'Adopted' %}selected{% endif %}>Adopted</option>
                    </select>
                    <!-- If "availability" is "Adopted", disable all inputs. -->
                    {% if animal['availability'] == 'Adopted' %}
                    <script>
                        document.querySelectorAll('input, select').forEach(function(input) {
                            input.disabled = true;
                        });
                    </script>
                    {% endif %}
                    <!--
                        Create hidden input with "animal_id" from "data".
                        If "availability" is not "Adopted", create submit button named "Edit Animal".
                    -->
                    <input type="hidden" name="animal_id" value="{{ animal['animal_id'] }}">
                    {% if animal['availability'] != 'Adopted' %}
                    <br>
                    <br>
                    <input type="submit" value="Edit Animal">
                    {% endif %}
                </form>
                <!-- If "availability" is "Pending", display value of "pending" from animal as "PENDING USER". -->
                {% if animal['availability'] == 'Pending' %}
                <br>
                <b><u>PENDING USER</u></b><br>
                {{ animal['pending'] }}<br><br>
                <!-- Create button to validate adoption. Route to /validate. -->
                <form action="/validate" method="post">
                    <input type="hidden" name="animal_id" value="{{ animal['animal_id'] }}">
                    <input type="submit" value="Validate Adoption">
                </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <footer>
        <p>&copy; PawPair Team 2023</p>
    </footer>
</body>
</html>
